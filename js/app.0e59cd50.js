(function(){"use strict";var t={568:function(t,e,o){var n=o(963),i=o(252);function s(t,e){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(o)}var r=o(744);const a={},d=(0,r.Z)(a,[["render",s]]);var c=d,u=o(201);const l=t=>((0,i.dD)("data-v-3d8e76e2"),t=t(),(0,i.Cn)(),t),h={class:"home"},m=l((()=>(0,i._)("div",{class:"hi"},[(0,i._)("div",{id:"hi"})],-1))),p={class:"map"};function g(t,e,o,n,s,r){const a=(0,i.up)("YandexMap");return(0,i.wg)(),(0,i.iD)("div",h,[m,(0,i._)("div",p,[(0,i.Wm)(a)])])}const y={class:"yandex-map"};function f(t,e,o,n,s,r){const a=(0,i.up)("ymapMarker"),d=(0,i.up)("ymap-marker"),c=(0,i.up)("yandex-map",!0);return(0,i.wg)(),(0,i.iD)("div",y,[s.isMapVisible?((0,i.wg)(),(0,i.j4)(c,{key:0,ref:"map",coords:s.coords,zoom:"12",style:{width:"100%",height:"100vh"},controls:[]},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{coords:s.coords},null,8,["coords"]),(0,i.Wm)(d,{"marker-type":"Polyline",coords:s.history,strokeColor:"#000000",strokeWidth:"4"},null,8,["coords"])])),_:1},8,["coords"])):(0,i.kq)("",!0)])}var v=o(836),w={components:{yandexMap:v.xR,ymapMarker:v.Jk},data(){return{isMapVisible:!1,coords:[55.72,37.65],history:[[38.8280899,65.2735666],[39.8280899,66.2735666]]}},mounted(){setTimeout((()=>{this.isMapVisible=!0,this.getData(),this.getHistory()}),1e3)},methods:{getData(){this.coords=this.$store.getters.getLat},getHistory(){this.history=this.$store.getters.getHistory}}};const b=(0,r.Z)(w,[["render",f]]);var j=b,M=o(907),O=(0,M.MT)({state:{lat:void 0,history:void 0},getters:{getLat:t=>t.lat,getHistory:t=>t.history},mutations:{SET_LAT(t,e){t.lat=e},SET_HISTORY(t,e){t.history=e}},actions:{},modules:{}}),S={name:"HomeView",data(){return{result:1,data:{action:"ws.admin.objects",data:{}},history:{action:"ws.admin.object_history",data:{start_time:"yyyy-mm-dd HH:MM",end_time:"yyyy-mm-dd HH:MM",object_id:4358}},historyData:{}}},methods:{sendMessage(t){const e=JSON.stringify(t);this.connection.send(e)},getHistory(){const t=new Date,e=t.getFullYear();let o=+t.getMonth()+1;1===String(o).length&&(o="0"+String(o));const n=t.getDate(),i=t.getHours(),s=t.getMinutes();let r=t.getDate()-3;1===String(r).length&&(r="0"+String(r));const a=e+"-"+String(o)+"-"+n+" "+i+":"+s,d=e+"-"+String(o)+"-"+r+" "+i+":"+s;this.history.data.start_time=d,this.history.data.end_time=a,this.historyData=this.connection.send(JSON.stringify(this.history))}},created(){this.connection=new WebSocket("wss://gps.uzal.uz:8443/ws/tracking/?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjYwNjY2MjQ0LCJpYXQiOjE2NjAwNjE0NDQsImp0aSI6ImRlNTRmODI5YThkMzRkOWRiYzZkMDUxMDI0ZWUxZGRjIiwidXNlcl9pZCI6MTk4MSwicm9sZSI6Mn0.mJODVAC1pjx_QfSHKslE7p8oLaNPQmSBZsyuJ15lguc"),this.connection.onmessage=function(t){const e=JSON.parse(t.data),o=JSON.parse(t.data).action;if("ws.admin.objects"==o){console.log("new one"),document.getElementById("hi").innerHTML=e.data["4358"].name+"<br />"+e.data["4358"].live_data.latitude+"<br />"+e.data["4358"].live_data.longitude;let t=[];t.push(e.data["4358"].live_data.latitude),t.push(e.data["4358"].live_data.longitude),O.commit("SET_LAT",t)}else if("ws.waited_object_history"==o){let t=[];for(let o=0;o<e.data.length;o++){let n=[];n.push(e.data[o].latitude),n.push(e.data[o].longitude),t.push(n)}O.commit("SET_HISTORY",t)}return JSON.parse(t.data)}},mounted(){setTimeout((()=>{this.sendMessage(this.data),this.getHistory()}),100),setInterval((()=>{this.sendMessage(this.data)}),5e3)},components:{YandexMap:j}};const _=(0,r.Z)(S,[["render",g],["__scopeId","data-v-3d8e76e2"]]);var k=_;const I=[{path:"/",name:"home",component:k}],T=(0,u.p7)({history:(0,u.PO)("/Boomerang/"),routes:I});var H=T;(0,n.ri)(c).use(O).use(H).mount("#app")}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,i,s){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],s=t[u][2];for(var a=!0,d=0;d<n.length;d++)(!1&s||r>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[d])}))?n.splice(d--,1):(a=!1,s<r&&(r=s));if(a){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,i,s]}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,r=n[0],a=n[1],d=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(d)var u=d(o)}for(e&&e(n);c<r.length;c++)s=r[c],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(u)},n=self["webpackChunkproject"]=self["webpackChunkproject"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(568)}));n=o.O(n)})();
//# sourceMappingURL=app.0e59cd50.js.map